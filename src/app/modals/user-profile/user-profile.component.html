<div class="page flex">
  <div class="page-header">
    <button icon-button ripple="#dcdcdc" (click)="close()">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M9.905 3.5a1.11 1.11 0 0 0-.784.323l-6.354 6.352h-.003A2.58 2.58 0 0 0 2 11.995c.007.679.28 1.327.764 1.805h.003l6.354 6.352c.285.282.561.363.83.346.27-.017.538-.148.741-.352a1.17 1.17 0 0 0 .35-.741c.015-.269-.07-.546-.356-.828l-5.509-5.475H20.89c.401 0 .654-.136.833-.337.18-.201.278-.483.278-.77 0-.288-.099-.57-.278-.77-.179-.201-.432-.338-.833-.338H5.18l5.506-5.489a1.102 1.102 0 0 0 0-1.575 1.104 1.104 0 0 0-.78-.323z"/>
     </svg>
    </button>

    <div class="page-title truncate">
      Profile
    </div>

    <div style="width:40px;">
      <button icon-button ripple="#dcdcdc" *ngIf="isRung" (click)="unring()">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="m2.7324 1.8809c-0.23645-0.019172-0.46632 0.052262-0.63281 0.21875-0.33298 0.33298-0.28432 0.91686 0.10742 1.3086l3.4473 3.4473-1.5391 0.94922c-2.411 1.4878-2.801 4.8328-0.79688 6.834l1.0977 1.0938c-2.6486 3.67 1.9582 8.1849 5.584 5.4727 0.73246 0.51664 1.6052 0.79372 2.502 0.79492 0.17516 6e-5 0.35145-0.01065 0.52539-0.03125 1.3376-0.15431 2.528-0.9162 3.2285-2.0645l0.93164-1.5156 3.4043 3.4043c0.39174 0.39174 0.97562 0.4404 1.3086 0.10742 0.33298-0.33298 0.28432-0.91686-0.10742-1.3086l-3.6934-3.6934 1.3047-2.123c1.4891-2.6477 1.2234-5.9314-0.67383-8.3047l1.3828-1.3828c0.81441-0.78543-0.39503-1.9909-1.1816-1.1777l-1.3848 1.3828c-2.476-1.9853-5.9436-2.1699-8.6172-0.45898l-1.7891 1.1055-3.7324-3.7324c-0.19587-0.19587-0.43933-0.307-0.67578-0.32617zm10.34 3.459c1.4421 0.037605 2.8612 0.61616 3.9355 1.6992v-0.0039063c1.8267 1.8267 2.2185 4.6411 0.96094 6.8965l-1.0801 1.7559-8.5352-8.5352 1.4609-0.90234c0.99886-0.64108 2.1362-0.9394 3.2578-0.91016zm-6.2051 2.7285 9.1074 9.1074-1.1406 1.8594c-0.92156 1.4999-3.0046 1.745-4.25 0.5l-6.084-6.0742c-1.243-1.2412-1.0012-3.3154 0.49414-4.2383l1.873-1.1543zm-1.2441 8.8711 3.1035 3.0996c-0.89402 0.46635-1.9855 0.31473-2.7168-0.37891-0.72681-0.71669-0.88524-1.8305-0.38672-2.7207z"/>
        </svg>
      </button>
    </div>
  </div>

  <ng-template #loading>
    <div class="page-content loading-skeleton">
      <div class="skeleton avatar"></div>

      <div class="user-name">
        <div class="skeleton"></div>
        <div class="skeleton"></div>
      </div>
    </div>
  </ng-template>

  <div class="page-content" *ngIf="profile; else loading">
    <div class="top-content">
      <section class="user-info">
        <div class="user-picture">
          <img avatar
            referrerpolicy="no-referrer"
            [name]="profile.name"
            [src]="profile.picture"
          >
        </div>

        <div class="user-name">
          {{profile.name}}
        </div>

        <div class="row" style="gap: 20px;">
          <div class="user-brief" *ngIf="profile.gender || profile.birthday">
            <la-gender [value]="profile.gender"></la-gender>
            <span style="padding: 4px;"
                  *ngIf="profile.birthday && profile.gender">
            </span>
            <span>{{profile.birthday | age}}</span>
          </div>

          <div class="user-brief">
            <svg width="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path fill="#f858a5" d="m16.581 3.25a5.3312 5.3091 0 0 0-4.5815 2.7375 5.3312 5.3091 0 0 0-4.5815-2.7375 5.6644 5.6409 0 0 0-5.4145 5.8483c0 3.7719 3.9867 7.8914 7.3304 10.684a4.1433 4.1261 0 0 0 5.3312 0c3.3437-2.7931 7.3304-6.9126 7.3304-10.684a5.6644 5.6409 0 0 0-5.4145-5.8483zm-2.9863 15.264a2.4765 2.4662 0 0 1-3.1904 0c-4.2799-3.5761-6.7348-7.0071-6.7348-9.4153a3.9984 3.9818 0 0 1 3.7485-4.1892 3.9984 3.9818 0 0 1 3.7485 4.1892 0.833 0.82954 0 0 0 1.666 0 3.9984 3.9818 0 0 1 3.7485-4.1892 3.9984 3.9818 0 0 1 3.7485 4.1892c0 2.4082-2.4548 5.8391-6.7348 9.412z" />
            </svg>

            <span style="padding: 4px;"></span>

            <span>{{profile.totalRingers| abbreviate}}</span>
          </div>
        </div>

        <div class="user-location">
          {{profile.city}}
        </div>
      </section>

      <section *ngIf="profile?.bio">
        <h2>About me</h2>
        <article>
          {{profile.bio}}
        </article>
      </section>

      <section *ngIf="profile.interested?.length">
        <h2>Interests</h2>
        <div class="chip-list">
          <div class="chip" *ngFor="let hop of profile.interested">
            {{topics[hop]}}
          </div>
        </div>
      </section>
    </div>

    <div class="bottom-content">
      <section class="flex-center" *ngIf="!isRung">
        <div class="ring-button">
          <div class="ring"></div>
          <div class="ring"></div>
          <button icon-button (click)="ring()">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path fill="currentColor" d="m 19.404711,14.775898 -3.148023,5.129115 a 4.3690085,4.3624561 0 0 1 -3.229811,2.064146 4.4357746,4.4291221 0 0 1 -0.524114,0.03083 4.3498132,4.3432896 0 0 1 -2.50373,-0.795823 3.9567276,3.9507936 0 0 1 -5.5824828,-5.471611 L 3.319082,14.638399 A 4.3932112,4.3866225 0 0 1 4.1161026,7.8051349 L 8.9291058,4.8334981 a 7.393514,7.3824257 0 0 1 8.6186732,0.459162 l 1.384562,-1.382486 a 0.83457658,0.83332494 0 1 1 1.180092,1.1783214 l -1.382894,1.3816528 a 7.4702951,7.4590916 0 0 1 0.675172,8.3057497 z M 8.7271383,20.039178 5.623348,16.939209 a 2.2708829,2.2674772 0 0 0 0.3864089,2.719973 2.359348,2.3558096 0 0 0 2.7173814,0.379996 z M 17.006972,7.0393092 A 5.747729,5.7391089 0 0 0 9.8154262,6.2501505 L 4.9940772,9.2217873 A 2.7248925,2.7208059 0 0 0 4.5000079,13.460078 L 10.584071,19.53585 A 2.7248925,2.7208059 0 0 0 14.83457,19.035855 L 17.968405,13.93174 A 5.7894578,5.7807751 0 0 0 17.006972,7.0351426 Z m 1.067424,14.9606828 a 0.83457658,0.83332494 0 0 1 -0.493234,-1.506652 7.2048996,7.1940942 0 0 0 2.766621,-4.505788 0.83457658,0.83332494 0 1 1 1.629928,0.35833 8.9299695,8.9165769 0 0 1 -3.411749,5.494111 0.83457658,0.83332494 0 0 1 -0.491566,0.159999 z M 2.8308547,6.7826451 A 0.83457658,0.83332494 0 0 1 2.1631934,5.4543252 8.9232929,8.9099103 0 0 1 7.765706,2.0168598 0.8347435,0.83349161 0 1 1 8.0995367,3.6501767 7.2074034,7.1965942 0 0 0 3.498516,6.4451485 0.83457658,0.83332494 0 0 1 2.8308547,6.7826451 Z" />
            </svg>
          </button>
        </div>
      </section>
    </div>
  </div>
</div>